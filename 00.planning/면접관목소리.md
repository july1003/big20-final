# 면접관 목소리 컨셉 관련

AI 모의 면접 시스템의 몰입감을 높이기 위해 면접관의 성격에 따라 목소리 톤을 다르게 설정하는 것은 매우 효과적인 전략입니다. 이를 위해 필요한 **데이터베이스 설계(PostgreSQL)**와 `edge-tts`를 활용한 **자동화 로직**을 제안합니다.

---

### 1. 면접관 페르소나 데이터베이스 설계 (ERD 및 테이블)

면접관의 성격별 목소리 설정값을 저장하기 위한 `interviewer_personas` 테이블을 설계합니다.

**SQL**

```
-- 면접관 페르소나 및 TTS 설정 테이블
CREATE TABLE interviewer_personas (
    persona_id SERIAL PRIMARY KEY,
    persona_name VARCHAR(50) NOT NULL, -- 깐깐한, 친절한, 침착한 등
    gender VARCHAR(10),                -- Male, Female
    voice_name VARCHAR(100) NOT NULL,  -- edge-tts 목소리 코드 (예: ko-KR-SunHiNeural)
    pitch VARCHAR(10) DEFAULT '+0Hz',  -- 주파수 조절 (톤의 높낮이)
    rate VARCHAR(10) DEFAULT '+0%',    -- 속도 조절
    volume VARCHAR(10) DEFAULT '+0%',  -- 볼륨 조절
    description TEXT                   -- 페르소나 설명
);

-- 기본 페르소나 데이터 등록
INSERT INTO interviewer_personas (persona_name, gender, voice_name, pitch, rate, description) VALUES
('깐깐한 면접관', 'Male', 'ko-KR-InJoonNeural', '-5Hz', '-10%', '낮고 느린 톤으로 압박감을 주는 스타일'),
('친절한 면접관', 'Female', 'ko-KR-SunHiNeural', '+5Hz', '+5%', '밝고 높은 톤으로 긴장을 풀어주는 스타일'),
('침착한 면접관', 'Male', 'ko-KR-InJoonNeural', '+0Hz', '+0%', '감정 변화 없이 객관적인 스타일'),
('열정적인 면접관', 'Female', 'ko-KR-SunHiNeural', '+2Hz', '+15%', '빠른 템포로 몰입감을 주는 스타일');
```

---

### 2. 파이썬 자동화 로직 구현

DB에서 설정값을 불러와 `edge-tts`로 음성을 생성하는 파이썬 코드입니다.

**Python**

```
import asyncio
import edge_tts
import psycopg2

# 1. DB에서 특정 페르소나의 설정값 가져오기
def get_persona_settings(persona_name):
    conn = psycopg2.connect(
        dbname="your_db", user="admin", password="password", host="localhost"
    )
    cur = conn.cursor()
  
    query = "SELECT voice_name, pitch, rate FROM interviewer_personas WHERE persona_name = %s"
    cur.execute(query, (persona_name,))
    settings = cur.fetchone()
  
    cur.close()
    conn.close()
    return settings

# 2. 페르소나 기반 음성 생성 로직
async def generate_interviewer_voice(text, persona_name, output_file="question.mp3"):
    settings = get_persona_settings(persona_name)
  
    if not settings:
        print("페르소나를 찾을 수 없습니다. 기본값으로 진행합니다.")
        voice, pitch, rate = "ko-KR-SunHiNeural", "+0Hz", "+0%"
    else:
        voice, pitch, rate = settings

    # edge-tts 엔진 설정
    communicate = edge_tts.Communicate(
        text=text,
        voice=voice,
        pitch=pitch,
        rate=rate
    )
  
    await communicate.save(output_file)
    print(f"[{persona_name}] 모드로 음성 생성 완료: {output_file}")

# 실행 예시
# asyncio.run(generate_interviewer_voice("지원자님, 본인의 가장 큰 단점은 무엇이라고 생각하시나요?", "깐깐한 면접관"))
```

---

### 3. 성격별 목소리 세부 튜닝 가이드

현재 보유하신 시스템 자원을 고려할 때, `edge-tts`의 `pitch`와 `rate` 속성을 조절하는 것만으로도 충분히 다른 인격을 부여할 수 있습니다.

* **깐깐한 면접관 (Strict)**
  * **Pitch** : `-5Hz` ~ `-10Hz` (목소리 톤을 낮추어 권위적이고 차가운 느낌)
  * **Rate** : `-10%` ~ `-15%` (말을 천천히 하여 답변을 기다리는 듯한 압박감 제공)
* **친절한 면접관 (Kind)**
  * **Pitch** : `+3Hz` ~ `+7Hz` (톤을 높여 상냥하고 밝은 느낌)
  * **Rate** : `+0%` ~ `+5%` (표준 혹은 약간 빠른 속도로 리듬감 있는 대화)
* **AI 기계적인 면접관 (Neutral)**
  * **Pitch** : `+0Hz`
  * **Rate** : `+0%`
  * **특징** : 감정 없이 객관적인 정보를 전달할 때 유용

---

### 4. 하드웨어 환경 최적화 팁 (6GB VRAM 활용)

* **비동기 처리** : `edge-tts`는 CPU와 네트워크 기반으로 동작하므로 GPU VRAM(6GB)을 거의 점유하지 않습니다. 따라서 **LLM이 답변을 생성하는 동안 동시에 음성을 생성(Streaming)**하도록 로직을 짜면 대기 시간을 획기적으로 줄일 수 있습니다.
* **캐싱 전략** : 면접 시스템에서 자주 나오는 공통 질문(예: "자기소개 부탁드립니다.")은 페르소나별로 미리 MP3 파일로 생성해 두어 서버 부하를 최소화하세요.

이 데이터베이스 구조와 로직을 사용하면, 면접 세션이 시작될 때 랜덤하게 면접관의 성격을 부여하거나 사용자가 직접 면접관의 스타일을 선택하게 하는 기능을 손쉽게 추가할 수 있습니다. **면접관의 성격에 따라 질문의 내용(Prompt)도 공격적으로 바꿀 수 있는 AI 프롬프트 체인** 구성을 도와드릴까요?
